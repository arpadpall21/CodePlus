<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title> Routing </title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="../../Assets/stylesPages.css">
  <script src="../../Assets/scriptPages.js"></script>
</head>

<body>
  <h1> Routing </h1>
  <p> Updated ( 2024-11-15 ) </p>
  <nav class="sitenav">
    <a href="../../index.html" title="home">MySite > </a>
    <a href="../index.html">Next.js > </a> Routing
  </nav>

  <p class="subSite"><a href=""> SubSite > </a></p>


  <table class="table">
    <tr>
      <th style="width:30%;"> Method / Property / statement ect... </th>
      <th> Description </th>
    </tr>
    <tr>
      <td>
        demo prop
      </td>
      <td>
        - demo description
        <span class="browserSupport">
          <span><i class="fab fa-chrome"></i> 0/0 -webkit- </span>
          <span><i class="fab fa-firefox"></i> </span>
          <span><i class="fab fa-opera"></i> </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> </span>
          <span><i class="fab fa-safari"></i> </span>
          <span><i class="fab fa-node-js"></i> </span>
        </span>
      </td>
    </tr>




  </table>
  <br>
  <details class="example" id="notes">
    <summary> Notes & Tips :</summary>
    <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
  </details>
  <h2 style="color:green;"><u> Useful Links : </u></h2>

  <h2 style="color:green;"><u> Remember This : </u></h2>

  <h2 style="color:green;"><u> Description and Demonstration : </u></h2>

  <pre class="syntax">
  ├─ app                         // root route segment <mark>/</mark>  
  │   ├─ api                      // the <mark>api</mark> folder is not required (but it's a prefix convention for api routes)
  │   │   └─ route.js                 // contains api logic (to serve resources)
  │   │
  │   ├─ <reqval>folder</reqval>                     // folder structure describes the URL path (each folder represents a route segment)
  │   │   ├─ layout.js                         // layout (frame) in which the current page.js and all deeper pages are rendered (does not rerender on navigation)
  │   │   │                                    // required in the root <mark>/</mark>, can be nested
  │   │   ├─ template.js                       // same as <mark>layout.js</mark> but the layout component unmounts & mounts (rerenders) on navigation 
  │   │   │
  │   │   ├─ page.js                           // component to render at route segment
  │   │   ├─ loading.js                        // <span class="openable">component to render<div>
  <p> - by Next.js implemted as: </p>
  <pre>
    &lt;Suspense fallback={<reqval>loading.jsComponent</reqval>}&gt;<reqval>page.jsComponent</reqval>&lt;/Suspense&gt;
  </pre>
  </div></span> while <mark>page.js</mark> is loading (because of SSR this loading mechanic is useful) (component does not accept any props)
  │   │   │
  │   │   ├─ error.js                          // <span class="openable">component to render<div>
    <p> - by Next.js implemted as: </p>
  <pre>
    &lt;ErrorBoundary fallback={<reqval>error.jsComponent</reqval>}&gt;<reqval>page.jsComponent</reqval>&lt;/ErrorBoundary&gt;
  </pre>
  </div></span> if <mark>page.js</mark> fails to render
  │   │   ├─ global-error.js                   // full page component to render if <mark>page.js</mark> fails to render (component must return an HTML document) <u>(works only as global and only in prod, but not in dev mode!)</u>
  │   │   ├─ not-found.js                      // component to render on <mark>404</mark> error (fallback page) <u>(works only as global fallback (placed on root path <mark>/</mark>))</u>
  │   │
  │   └─ [<reqval>folder</reqval>]              // dynamic route segment that can be captured (route param)
  │   └─ (<reqval>folder</reqval>)              // <span class="openable">route group<div>
  <pre>
    └
    └
    └
    └
  </pre>
  </div></span>, folder is not part of URL but it's content, (groups routes <a href="https://nextjs.org/docs/app/building-your-application/routing/route-groups" target="_blank">[link]</a>)
  │
  └─ public                    // public assets
  </pre>
  <h3 class="header"> Syntax <mark>route.js</mark> </h3>
  <pre class="syntax">
  import { NextResponse } from 'next/server';
  import { redirect } from 'next/navigation'
  
  <span style="background-color:red;">export const dynamic = 'force-static';                        // caches <mark>GET</mark> requests (only GET requests!)</span>  
  
  
  export async function <reqval class="openable">httpMethod<div>
    <p> - <mark>GET</mark> / <mark>POST</mark> / <mark>PUT</mark> / <mark>PATCH</mark> / <mark>DELETE</mark> / <mark>HEAD</mark> / <mark>OPTIONS</mark> </p>
    <p> - if an unsupported method is called, Next.js will return a <mark>405 Method Not Allowed</mark> response </p>
  </div></reqval>(<a href="https:\/\/nextjs.org/docs/app/api-reference/functions/next-request" target=_blank>req:NextRequest</a>, { params }) {           // <mark>NextRequest</mark> extends the official <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank">Request</a> object 
    
    await params                                                    // -> { <reqval>slugA</reqval>: <reqval>param</reqval><optval>, ...</optval>}       // captures slugs 
    redirect(<reqval>url:str</reqval>)                                                          // respond with redirect (<mark>307 Temporary Redirect)</mark>)
    
    return <a href="https:\/\/nextjs.org/docs/app/api-reference/functions/next-response" target="_blank">NextResponse</a>          // <mark>NextResponse</mark> extends the official <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank">Response</a> object 
  }
  </pre>
  <details class="example">
    <summary> Example : </summary>
    <pre>
  import { NextResponse } from 'next/server'
  
  export async function GET(req) {
    await params;                                         // -> { slugA: 'param', slugB: 'param' }    // caputres slugs 
    
    return NextResponse.json({ message:'OK' });
  }
    </pre>
  </details>
  <h3 class="header"> Syntax <mark>layout.js</mark> / <mark>template.js</mark> </h3>
  <pre class="syntax">
  function <reqval>Component</reqval>({ children }) {
    return(
      &lt;&gt;
        <reqval>JSX</reqval>
        {children}
        <reqval>JSX</reqval>
      &lt;/&gt;
    )
  }
  </pre>
  <details class="example">
    <summary> Example : </summary>
    <pre>
// layout.js or template.js (file) ---
    'use client';
    
    import { useEffect } from 'react';
    
    function SomeLayout({ children }) {
      useEffect(() => {
        // some logic...
      }, []);                       // <mark>layout.js</mark> mounts once across nested route navigations
                                    // <mark>template.js</mark> unmounts & mounts at each route navigation

      return (
        &lt;&gt;
          &lt;div&gt; Layout Header &lt;/div&gt;
          {children}
          &lt;div&gt; Layout Footer &lt;/div&gt;
        &lt;/&gt;
      )
    }
    
    export default SomeLayout;
    </pre>
  </details>
  <h3 class="header"> Syntax <mark>error.js</mark> / <mark>global-error.js</mark> </h3>
  <pre class="syntax">
  'use client';                                                   // client component (because of &lt;ErrorBoundary /&gt;)
  
  function <reqval>Component</reqval>({ error, reset }) {
    error;                                                          // -> intercepted error
    reset();                                                        // tries to reload the current <mark>page.js</mark> component
    
  // <mark>global-error.js</mark> --------------------------
    return <reqval>HTMLDocument:JSX</reqval>                        // <mark>global-error.js</mark> must return an HTML document
  }
  </pre>
  <details class="example">
    <summary> Example : </summary>
    <pre>
  'use client';
  
  function ErrorComponent({ error, reset }) {
    console.log(error)
    return &lt;button onClick={() =&gt; reset()}&gt; Reset &lt;/button&gt;    // on click tries to reload the current <mark>page.js</mark>
  }
  
  export default ErrorComponent;
  </pre>
  </details>

  
  
  
  <!--
---------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------
stage 1: high level overview 
    - read through 
    - create notes 
    - deciede what exactly will you document down 
    - UNDERSTAND AND WRITE DOWN THE CONCEPTS!!!
    
stage 2:  low level overview
    - deeper understanding of all what you've taken down in stage 1
    
stage 3 : 
    - organize and document down everything 
---------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------
-----------------------------------
    - in directories (url segments) we can store relevant files (because only the page.js and route.js are exposed publicly)

    - for navigation we can use
        - <Link> component :https://nextjs.org/docs/app/api-reference/components/link
        - useRoouter hook: https://nextjs.org/docs/app/api-reference/functions/use-router
            - works from client component 
        - redirect() call: 
            - in page.js redirects to URL
            - in route.js responds with 307 Temporary Redirect
            - permanentRedicect() in route.js responds with 308 Temporary Redirect
        - native browser history apy: https://developer.mozilla.org/en-US/docs/Web/API/History_API
        - redirect in middleware :https://nextjs.org/docs/app/building-your-application/routing/redirecting#nextresponseredirect-in-middleware


?????????????????????????????????????????????????????????????????????????????????????????????
WRITE DOWN WHAT YOU DON'T UNDERSTAD OR MUST BE TESTED AS QUESTIONS HERE
?????????????????????????????????????????????????????????????????????????????????????????????
    - parallel routes
      -  simultaneously show two or more pages in the same view that can be navigated independently. You can use them for split views that have their own sub-navigation.
        - default.js
    
-->


  <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
  <hr>
  <hr>
  <hr>
  <hr>
  <hr>


  <h2 class="headerExtra"><u> Title 1 </u></h2>
  <h2 class="header"> Title 1.1 </h2>
  <h3 class="header"> Title 1.1.1 </h3>
  <h4 class="header"> Title 1.1.1.1 </h4>
  <p> - stuff to learn <mark>syntax or command (or some tchnical stuff)</mark> bla bla bla </p>
  <p> - stuff to learn <mark class="mark">highlights like file names and other things</mark> bla bla bla </p>
  <p style="text-decoration:underline;"> - important information is underlined </p>
  <p style="color:yellow;"> - very important information is written with yellow colors </p>
  <p style="background-color:yellow;"> - highly important information has yellow background color </p>
  <div style="background-color:red;">
    <p> - red background block means not learned or not tested information! </p>
    <p> - </p>
  </div>

  <pre class="syntax">
    <reqval>required value </reqval>
    <optval>optional value </optval>
    <lit>literally used </lit>
    <opt>optionally used </opt>
  
    <prot style="color:#049500;">prototype chain</prot>
        
    <span class="openable"> this is an openable element<div>
        <p> - openable elements listed here in paragraphs </p>
        <p> - </p>
    </div></span>
    </pre>

  <details class="example">
    <summary> DEMO (can be pseudocode) </summary>
    <pre>
    examples of the current lessons 
    
// -----------------------------------------

// -----------------------------------------
    </pre>
  </details>

  <pre class="cmd">
    command line demo 
    </pre>
  <pre class="formula">
    formula code (like conversion meter...)
    </pre>
  <details class="example">
    <summary> Example : </summary>
    <h4 style="color:darkblue;"><u> example title </u></h4>
    <p> - live tests will come here </p>
    <details>
      <summary> CODE : </summary>
      <pre>
    copy of the exaple code 
        </pre>
    </details>
  </details>
  <!---------------------------------------------------------------------------------------------------------------------------------->
  <hr>

  <h2 class="test" style=""><a href="TEST/index.html"> TEST > </a></h2>


  <br><br>
</body>

</html>